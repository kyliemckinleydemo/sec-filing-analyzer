// Shared mock data for cron/pipeline integration tests

export const MOCK_CRON_JOB_RUN_SUCCESS = {
  id: 'cron-run-001',
  jobName: 'daily-filings-rss',
  status: 'success',
  startedAt: new Date('2024-12-01T10:00:00Z'),
  completedAt: new Date('2024-12-01T10:05:00Z'),
  filingsFetched: 25,
  filingsStored: 20,
  companiesProcessed: 15,
  errorMessage: null,
};

export const MOCK_CRON_JOB_RUN_RUNNING = {
  id: 'cron-run-002',
  jobName: 'daily-filings-rss',
  status: 'running',
  startedAt: new Date(Date.now() - 15 * 60 * 1000), // 15 min ago (stuck)
  completedAt: null,
  filingsFetched: 0,
  filingsStored: 0,
  companiesProcessed: 0,
  errorMessage: null,
};

export const MOCK_CRON_JOB_RUN_FAILED = {
  id: 'cron-run-003',
  jobName: 'daily-filings-rss',
  status: 'failed',
  startedAt: new Date('2024-12-01T10:00:00Z'),
  completedAt: new Date('2024-12-01T10:01:00Z'),
  filingsFetched: 0,
  filingsStored: 0,
  companiesProcessed: 0,
  errorMessage: 'Connection timeout',
};

export const MOCK_RSS_FILING = {
  ticker: 'AAPL',
  cik: '0000320193',
  companyName: 'Apple Inc.',
  accessionNumber: '0001193125-24-050001',
  formType: '10-K',
  filingDate: '2024-12-01',
  reportDate: '2024-09-30',
  filingUrl: 'https://www.sec.gov/Archives/edgar/data/320193/000119312524050001.txt',
};

export const MOCK_RSS_FILING_2 = {
  ticker: 'MSFT',
  cik: '0000789019',
  companyName: 'Microsoft Corporation',
  accessionNumber: '0001193125-24-050002',
  formType: '10-Q',
  filingDate: '2024-12-01',
  reportDate: '2024-09-30',
  filingUrl: 'https://www.sec.gov/Archives/edgar/data/789019/000119312524050002.txt',
};

export const MOCK_COMPANY_AAPL_FULL = {
  id: 'company-001',
  ticker: 'AAPL',
  name: 'Apple Inc.',
  cik: '0000320193',
  sector: 'Technology',
  industry: 'Consumer Electronics',
  currentPrice: 195.0,
  fiftyTwoWeekHigh: 199.62,
  fiftyTwoWeekLow: 164.08,
  marketCap: 3_000_000_000_000,
  analystTargetPrice: 210.0,
  peRatio: 31.5,
  forwardPE: 28.2,
  dividendYield: 0.005,
  beta: 1.2,
  volume: BigInt(55000000),
  averageVolume: BigInt(60000000),
  analystRating: 2.1,
  analystRatingCount: 38,
  yahooLastUpdated: new Date('2024-12-01'),
  createdAt: new Date('2024-01-01'),
  updatedAt: new Date('2024-12-01'),
};

export const MOCK_COMPANY_MSFT_FULL = {
  id: 'company-002',
  ticker: 'MSFT',
  name: 'Microsoft Corporation',
  cik: '0000789019',
  sector: 'Technology',
  industry: 'Software',
  currentPrice: 380.0,
  fiftyTwoWeekHigh: 420.0,
  fiftyTwoWeekLow: 310.0,
  marketCap: 2_800_000_000_000,
  analystTargetPrice: 410.0,
  peRatio: 35.0,
  forwardPE: 30.0,
  dividendYield: 0.008,
  beta: 0.9,
  volume: BigInt(25000000),
  averageVolume: BigInt(28000000),
  analystRating: 1.8,
  analystRatingCount: 42,
  yahooLastUpdated: new Date('2024-12-01'),
  createdAt: new Date('2024-01-01'),
  updatedAt: new Date('2024-12-01'),
};

export const MOCK_FILING_RECENT = {
  id: 'filing-100',
  companyId: 'company-001',
  cik: '0000320193',
  accessionNumber: '0001193125-24-050001',
  filingType: '10-K',
  filingDate: new Date('2024-12-01'),
  reportDate: new Date('2024-09-30'),
  filingUrl: 'https://www.sec.gov/test',
  analysisData: JSON.stringify({
    summary: 'Apple quarterly results show revenue growth',
    filingContentSummary: 'Revenue increased 8% year-over-year',
  }),
  aiSummary: 'Revenue growth continues',
  riskScore: 3.5,
  sentimentScore: 0.2,
  concernLevel: 4.5,
  predicted7dReturn: null,
  predicted30dReturn: null,
  predicted30dAlpha: null,
  predictionConfidence: null,
  actual7dReturn: null,
  actual30dReturn: null,
  actual7dAlpha: null,
  actual30dAlpha: null,
  consensusEPS: null,
  actualEPS: null,
  epsSurprise: null,
  consensusRevenue: null,
  actualRevenue: null,
  revenueSurprise: null,
  createdAt: new Date('2024-12-01'),
  updatedAt: new Date('2024-12-01'),
  company: {
    id: 'company-001',
    ticker: 'AAPL',
    name: 'Apple Inc.',
    sector: 'Technology',
  },
};

export const MOCK_FILING_8K_EARNINGS = {
  ...MOCK_FILING_RECENT,
  id: 'filing-101',
  filingType: '8-K',
  accessionNumber: '0001193125-24-050010',
  analysisData: JSON.stringify({
    filingContentSummary: 'Quarterly earnings results: net income up, EPS beats estimates',
  }),
};

export const MOCK_YAHOO_FINANCIALS = {
  marketCap: 3_000_000_000_000,
  peRatio: 31.5,
  forwardPE: 28.2,
  currentPrice: 195.0,
  fiftyTwoWeekHigh: 199.62,
  fiftyTwoWeekLow: 164.08,
  analystTargetPrice: 210.0,
  earningsDate: new Date('2025-01-25'),
  dividendYield: 0.5,
  beta: 1.2,
  volume: 55000000,
  averageVolume: 60000000,
  analystRatingCount: 38,
  epsActual: 1.56,
  epsEstimateCurrentQ: 1.60,
  epsEstimateNextQ: 1.65,
  epsEstimateCurrentY: 6.50,
  epsEstimateNextY: 7.10,
  additionalData: { sector: 'Technology' },
};

export const MOCK_YAHOO_QUOTE_SUMMARY = {
  price: {
    regularMarketPrice: 195.0,
    marketCap: 3_000_000_000_000,
    regularMarketVolume: 55000000,
    regularMarketChangePercent: 1.25,
  },
  summaryDetail: {
    trailingPE: 31.5,
    forwardPE: 28.2,
    beta: 1.2,
    dividendYield: 0.005,
    fiftyTwoWeekHigh: 199.62,
    fiftyTwoWeekLow: 164.08,
    averageVolume: 60000000,
  },
  financialData: {
    targetMeanPrice: 210.0,
    currentPrice: 195.0,
    numberOfAnalystOpinions: 38,
  },
  recommendationTrend: {
    trend: [
      { strongBuy: 10, buy: 15, hold: 10, sell: 2, strongSell: 1 },
    ],
  },
  upgradeDowngradeHistory: {
    history: [
      {
        epochGradeDate: new Date('2024-11-20').getTime() / 1000,
        firm: 'Goldman Sachs',
        toGrade: 'Buy',
        fromGrade: 'Hold',
        action: 'upgrade',
      },
      {
        epochGradeDate: new Date('2024-11-25').getTime() / 1000,
        firm: 'Morgan Stanley',
        toGrade: 'Overweight',
        fromGrade: 'Overweight',
        action: 'main',
      },
    ],
  },
  earningsHistory: {
    history: [
      {
        quarter: { fmt: '3Q2024' },
        epsEstimate: { raw: 1.50 },
        epsActual: { raw: 1.56 },
        surprisePercent: { raw: 0.04 },
      },
    ],
  },
};

export const MOCK_ANALYST_ACTIVITY = {
  id: 'analyst-001',
  companyId: 'company-001',
  activityDate: new Date('2024-12-01T10:00:00Z'),
  firm: 'Goldman Sachs',
  actionType: 'upgrade',
  previousRating: 'Hold',
  newRating: 'Buy',
  previousTarget: 180.0,
  newTarget: 210.0,
  analystName: 'John Smith',
  note: null,
  source: 'yahoo',
  createdAt: new Date('2024-12-01'),
  company: {
    ticker: 'AAPL',
    name: 'Apple Inc.',
  },
};

export const MOCK_PAPER_PORTFOLIO = {
  id: 'portfolio-001',
  name: 'Main Portfolio',
  startingCapital: 100000,
  currentCash: 85000,
  totalValue: 102000,
  totalReturn: 2.0,
  winRate: 60.0,
  sharpeRatio: 1.5,
  maxDrawdown: -3.0,
  totalTrades: 10,
  winningTrades: 6,
  losingTrades: 4,
  maxPositionSize: 0.10,
  minConfidence: 0.60,
  isActive: true,
  createdAt: new Date('2024-01-01'),
  updatedAt: new Date('2024-12-01'),
};

export const MOCK_USER_WITH_WATCHLIST = {
  id: 'user-001',
  email: 'trader@example.com',
  name: 'Test Trader',
  tier: 'pro',
  apiKey: null,
  createdAt: new Date('2024-01-01'),
  updatedAt: new Date('2024-12-01'),
  alerts: [
    {
      id: 'alert-001',
      userId: 'user-001',
      alertType: 'new_filing',
      ticker: null,
      sector: null,
      enabled: true,
      frequency: 'immediate',
      deliveryTime: 'both',
      minConcernLevel: null,
      minPredictedReturn: null,
      createdAt: new Date('2024-01-01'),
      updatedAt: new Date('2024-01-01'),
    },
    {
      id: 'alert-002',
      userId: 'user-001',
      alertType: 'analyst_change',
      ticker: null,
      sector: null,
      enabled: true,
      frequency: 'immediate',
      deliveryTime: 'both',
      minConcernLevel: null,
      minPredictedReturn: null,
      createdAt: new Date('2024-01-01'),
      updatedAt: new Date('2024-01-01'),
    },
  ],
  watchlist: [
    { id: 'watch-001', userId: 'user-001', ticker: 'AAPL', createdAt: new Date() },
    { id: 'watch-002', userId: 'user-001', ticker: 'MSFT', createdAt: new Date() },
  ],
  sectorWatchlist: [
    { id: 'sector-001', userId: 'user-001', sector: 'Technology', createdAt: new Date() },
  ],
};

export const MOCK_MACRO_INDICATORS = {
  id: 'macro-001',
  date: new Date('2024-12-01'),
  spxClose: 5000.0,
  spxReturn7d: 1.5,
  spxReturn14d: 2.0,
  spxReturn21d: 3.0,
  spxReturn30d: 4.0,
  vixClose: 14.5,
  vixMA30: 15.0,
  fedFundsRate: 5.25,
  treasury3m: 5.30,
  treasury2y: 4.50,
  treasury10y: 4.20,
  yieldCurve2y10y: -0.30,
  fedFundsChange30d: 0,
  treasury10yChange30d: -0.10,
  techSectorReturn30d: 5.0,
  financialSectorReturn30d: 2.0,
  energySectorReturn30d: -1.0,
  healthcareSectorReturn30d: 1.5,
  createdAt: new Date('2024-12-01'),
};
